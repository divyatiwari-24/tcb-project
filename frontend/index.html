<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CO₂ Predictor</title>
  <style>
    body { 
    font-family: Arial, sans-serif;
    padding: 24px; 
    max-width:700px; 
    margin:auto; 
    }
    label{
    display:block;
    margin-top:12px
    }
    input, select { width:100%; padding:8px; margin-top:4px; }
    button { margin-top:16px; padding:10px 16px; }
    .result { margin-top:20px; font-size:1.2rem; font-weight:600; }
  </style>
</head>
<body>
  <h1>CO₂ Emissions Predictor</h1>
  <p>Enter vehicle details and click Predict</p>
  <form id="frm">
    <label>Year <input name="year" type="number" value="2016"/></label>
    <label>Displacement (displ) <input name="displ" type="number" step="0.1" /></label>
    <label>Cylinders <input name="cylinders" type="number" /></label>
    <label>City MPG (city08) <input name="city08" type="number" /></label>
    <label>Highway MPG (highway08) <input name="highway08" type="number" /></label>
    <label>Combined MPG (comb08) <input name="comb08" type="number" /></label>
    <label>Barrels/yr (barrels08) <input name="barrels08" type="number" step="0.1" /></label>
    <label>Make <input name="make" type="text" /></label>
    <label>Model <input name="model" type="text" /></label>
    <label>Transmission (trany) <input name="trany" type="text" /></label>
    <label>Vehicle Class (VClass) <input name="VClass" type="text" /></label>
    <label>Fuel Type (fuelType) <input name="fuelType" type="text" /></label>

    <button type="submit">Predict CO₂</button>
  </form>

  <div class="result" id="result"></div>

<script>
document.getElementById('frm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const fd = new FormData(e.target);
  const obj = {};
  for (const [k,v] of fd.entries()) {
    if (v === '') obj[k] = null;
    else if (['year','displ','cylinders','city08','highway08','comb08','barrels08'].includes(k)) obj[k] = Number(v);
    else obj[k] = v;
  }

  try {
    const res = await fetch('/predict', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(obj)
    });
    const j = await res.json();
    document.getElementById('result').innerText = "Predicted CO₂: " + j.predicted_co2_g_per_mile.toFixed(2) + " g/mile";
  } catch (err) {
    document.getElementById('result').innerText = "Error: " + err.message;
  }
});
</script>
</body>
</html>
